<%= include header %>

  <body onLoad="displayCards();displayAllergies();displayAddresses()">
  
  <div align="center" class="container span4">
    
  </div>

  <div align="center" class="container span6">
    <div class="page-header">
      <h1><img src="http://i.picresize.com/images/2013/11/09/L0awx.png"/> Settings</h1>
    </div>
    <form id="settings" method="POST">
      <table class="table table-striped table-bordered" >
        <thead></thead>
        <tbody>
          <tr>
            <td align="center" class="span2">Name</td>
            <td><input class="span4" type="text" placeholder="" ></td>
          </tr>
          <tr>
            <td align="center" class="span2">Email</td>
            <td><input class="span4" type="email" placeholder="" ></td>
          </tr>
          <tr>
            <td align="center" class="span2">Telephone</td>
            <td><input class="span4" type="tel" placeholder="Number" ></td>
          </tr>
          <tr>
            <td align="center" class="span2">Address</td>
            <td>
              <select id="addresses">
                <option value="home">Home</option>
                <option value="work">Work</option>
                <option value="dorm">Dorm</option>
              </select>
              <input type="button" value="Add" onclick="addAllergy()">
            </td>
          </tr>
            <td align="center" class="span2">Tip</td>
            <td>  
              <select id="tip">
                <option value="10">10%</button>
                <option value="15">15%</button>
                <option value="20">20%</button>
              </select>
            </td>
          </tr>
          <tr>
            <td align="center" class="span2">Vegetarian</td>
            <td>  
              YES <input type="radio" name="group1" value="Yes">
              NO <input type="radio" name="group1" value="No" checked>
            </td>
          </tr>
          <tr>
            <td class="span2">Restrictions</td>
            <td>
              <textarea rows="4" cols="40"  id="allergies"></textarea>
              <input type="button" value="Add" onclick="addAllergy()">
            </td>
          </tr>
          <tr>
            <td align="center" class="span2">Cards</td>
            <td>
              <select id="cards">
                <option value="5432">5432</option>
                <option value="2943">2943</option>
                <option value="1284">1284</option>
              </select>
              <input type="button" value="Add" onclick="addCard()">
            </td>
          </tr>    
          </tbody>
        </table>
        <!-- <a href="" class="btn btn-large btn-danger" onclick="goBack()">Go Back</a> -->
      </form>
    </div>
    <script>
      function addAllergy() {
        localStorage.setItem('allergies', document.getElementById('allergies').value);
      }
      function addAddress() {
        window.prompt(localStorage.addresses.length);
        var newAddress = window.prompt("Enter address:");
        var newNickname = window.prompt("Enter nickname:");
        addresses = JSON.parse(localStorage.addresses);
        window.notify(addresses[0][0]);
        var newIndex =addresses.length;
        addresses[newIndex]=[];
        addresses[newIndex][0]=newAddress;
        addresses[newIndex][1]=newNickname;
        window.notify(addresses[0][0]);
        localStorage.addresses=JSON.stringify(addresses);
        window.notify(addresses[0][0]);
      }
      function addCard() {
        var newCreditCard = window.prompt("Enter new credit card number:");
        var creditCards = JSON.parse(localStorage.creditCards);
        var newIndex =creditCards.length;
        creditCards[newIndex]=newCreditCard;
        localStorage.creditCards=JSON.stringify(creditCards);
        displayCards();
      }
      function displayCards()
      {
        var creditCards = JSON.parse(localStorage.creditCards);
        for (var i=0;i<creditCards.length;i++){
          document.getElementById('creditCardList').innerHTML+="<option value='"+i+"'>" +creditCards[i]+"</option>";
        }
      }
      function displayAllergies()
      {
        if(localStorage.allergies!==null)document.getElementById('allergies').value=localStorage.allergies;
      }
      function displayAddresses()
      {
        var addresses = JSON.parse(localStorage.addresses);
        for (var i=0;i<addresses.length;i++){
          document.getElementById('addresses').innerHTML+="<option value='"+i+"'>" +addresses[i][0]+"</option>";
        }
      }
      function goBack()
      {
        window.history.back()
      }
      </script>
    </form> 
<%= include footer %>